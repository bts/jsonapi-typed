<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>JsonApi.Relationships</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_JsonApi-Relationships.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">jsonapi-typed-0.1.0.0: Type-level combinators for JSON API spec</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Leonid Onokhov, 2016</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>sopvop@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">JsonApi.Relationships</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Defining resources</a><ul><li><a href="#g:2">Helper functions for defining <code>IsResource</code> instances</a></li></ul></li><li><a href="#g:3">Describing relationships</a></li><li><a href="#g:4">Fetching related resources</a></li><li><a href="#g:5">Fetching related resource from description</a></li><li><a href="#g:6">Serialising documents</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Overview</h1><p>To define a relationship you need to define <code><a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a></code> instance
 for it. Associated resources should at least define <code><a href="JsonApi-Relationships.html#t:HasResourceId">HasResourceId</a></code> and
 <code><a href="JsonApi-Relationships.html#t:IsResource">IsResource</a></code> instances.</p><h2>Example model</h2><p>For example we have books and authors, and want to define relationship
 <code>book has one author</code>.</p><pre>type BookId = Text
type AuthorId = Text

data Book = Book { bookId       :: BookId
                 , bookTitle    :: Text
                 , bookAuthorId :: AuthorId
                 }

data Author = Author { authorId :: AuthorId
                     , authorName :: Text
                     , authorBirthday :: Maybe UTCTime
                     }

</pre><h2>Describe how to serialise you data into JSON API resource object</h2><p>We need to define <code><a href="JsonApi-Relationships.html#t:HasResourceId">HasResourceId</a></code> and <code><a href="JsonApi-Relationships.html#t:IsResource">IsResource</a></code> for Author type</p><pre>instance <code><a href="JsonApi-Relationships.html#t:HasResourceId">HasResourceId</a></code> Author where
   resourceId a = mkResourceId (authorId a) &quot;author&quot;

instance <code><a href="JsonApi-Relationships.html#t:IsResource">IsResource</a></code> Author where
   resourceAttributes a = [&quot;name&quot; .= authorName a
                          ,&quot;birthday&quot; .= authorBirthday a ]

instance <code><a href="JsonApi-Relationships.html#t:HasResourceId">HasResourceId</a></code> Book where
   resourceId a = mkResourceId (bookId a) &quot;book&quot;

instance <code><a href="JsonApi-Relationships.html#t:IsResource">IsResource</a></code> Book where
   resourceAttributes b = [&quot;title&quot; .= bookTitle b ]
   resourceLinks b = <code><a href="JsonApi-Relationships.html#v:links">links</a></code> [(&quot;self&quot;, bookUrl (bookId b))]

</pre><h2>Describe how to fetch related data</h2><p>Next we need to define how to get Author from Book object.</p><pre>instance <code><a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a></code> DatabaseM Book &quot;author&quot; Author where
   <code><a href="JsonApi-Relationships.html#v:fetchRelated">fetchRelated</a></code> _ mode book = case mode of
       <code><a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a></code> -&gt; pure (relationship, [])
       <code><a href="JsonApi-Relationships.html#v:FetchIncluded">FetchIncluded</a></code> -&gt; do
         author &lt;-  getAuthor (bookAuthorId)
         pure (relationship, [author])
     where
       authorId = <code><a href="JsonApi-Relationships.html#v:mkResourceId">mkResourceId</a></code> (bookAuthorId book) &quot;author&quot;
       relationship = <code><a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a></code>
                      Nothing -- Don't have any links
                      (Just (SingletonData authorId))
                      Nothing -- Don't hav any meta

</pre><p><code>DatabaseM</code> is a monad in which we fetch our relationships.
 Book is a <code>from</code> part of relationshop, <code>&quot;author&quot;</code> is a name identifying
 this relationship. And Author is type of relationship target.</p><h2>Describe resource relationships themselves</h2><pre>type AuthorResource = <code><a href="JsonApi-Relationships.html#t:Resource">Resource</a></code> Author '[]

type BookResource = <code><a href="JsonApi-Relationships.html#t:Resource">Resource</a></code> Book '[<code><a href="JsonApi-Relationships.html#t:Rel">Rel</a></code> &quot;author&quot; AuthorResource]

</pre><h2>Using it</h2><pre>getBookResource :: BookId -&gt; <code><a href="JsonApi-Relationships.html#t:Include">Include</a></code> -&gt; <code><a href="JsonApi-Relationships.html#t:FieldsFilter">FieldsFilter</a></code> -&gt; DatabaseM Document
getBookResource bookId whatToInclude fieldSet = do
  book &lt;- getBook bookId
  <code><a href="JsonApi-Relationships.html#v:serialiseDocument">serialiseDocument</a></code> (Proxy :: Proxy BookResource) book whatToInclude fieldSet
</pre></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:ResourceId">ResourceId</a></li><li class="src short"><a href="#v:mkResourceId">mkResourceId</a> :: <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a> -&gt; <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:HasResourceId">HasResourceId</a> a <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><span class="keyword">class</span> <a href="JsonApi-Relationships.html#t:HasResourceId">HasResourceId</a> a =&gt; <a href="#t:IsResource">IsResource</a> a <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><a href="#v:links">links</a> :: [(<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>)] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="JsonApi-Internal-Document.html#t:Links">Links</a></li><li class="src short"><a href="#v:meta">meta</a> :: [(<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="file:///nix/store/fqkv52hj2fkryi7xrq1rwfy8fa45smly-aeson-0.11.2.0/share/doc/x86_64-linux-ghc-8.0.1/aeson-0.11.2.0/html/Data-Aeson-Types.html#t:Value">Value</a>)] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="JsonApi-Internal-Document.html#t:Meta">Meta</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:Resource">Resource</a> a relationships</li><li class="src short"><span class="keyword">data</span> <a href="#t:Rel">Rel</a> name a</li><li class="src short"><span class="keyword">data</span> <a href="#t:RelInclude">RelInclude</a> name a</li><li class="src short"><span class="keyword">data</span> <a href="#t:FetchMode">FetchMode</a><ul class="subs"><li>= <a href="#v:FetchIncluded">FetchIncluded</a></li><li>| <a href="#v:FetchRelationship">FetchRelationship</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:FetchRelated">FetchRelated</a> m r nm a <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><span class="keyword">class</span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="#t:SerialiseResource">SerialiseResource</a> m a <span class="keyword">where</span><ul class="subs"><li><span class="keyword">type</span> <a href="#t:SerialiseI">SerialiseI</a> m a</li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:Include">Include</a><ul class="subs"><li>= <a href="#v:IncludeDefault">IncludeDefault</a></li><li>| <a href="#v:Include">Include</a></li><li>| <a href="#v:IncludeNot">IncludeNot</a></li><li>| <a href="#v:IncludeChildren">IncludeChildren</a> (<a href="file:///nix/store/wmgvv9jynyfk4cwsadd1yzc0sdipbin7-unordered-containers-0.2.7.1/share/doc/x86_64-linux-ghc-8.0.1/unordered-containers-0.2.7.1/html/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a> <a href="JsonApi-Relationships.html#t:Include">Include</a>)</li></ul></li><li class="src short"><a href="#v:serialiseDocument">serialiseDocument</a> :: <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> m a =&gt; proxy a -&gt; <a href="JsonApi-Internal-Document.html#t:ResourceData">ResourceData</a> (<a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m a) -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:FieldsFilter">FieldsFilter</a> -&gt; m <a href="JsonApi-Internal-Document.html#t:Document">Document</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:FieldsFilter">FieldsFilter</a> = <a href="file:///nix/store/wmgvv9jynyfk4cwsadd1yzc0sdipbin7-unordered-containers-0.2.7.1/share/doc/x86_64-linux-ghc-8.0.1/unordered-containers-0.2.7.1/html/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="JsonApi-Internal-Document.html#t:ResourceType">ResourceType</a> (<a href="file:///nix/store/wmgvv9jynyfk4cwsadd1yzc0sdipbin7-unordered-containers-0.2.7.1/share/doc/x86_64-linux-ghc-8.0.1/unordered-containers-0.2.7.1/html/Data-HashSet.html#t:HashSet">HashSet</a> <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>)</li></ul></div><div id="interface"><h1 id="g:1">Defining resources</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ResourceId" class="def">ResourceId</a> <a href="#t:ResourceId" class="selflink">#</a></p><div class="doc"><p>Resource identifier object.</p><p><a href="http://jsonapi.org/format/#document-resource-identifier-objects">JSON API Spec</a></p></div><div class="subs instances"><p id="control.i:ResourceId" class="caption collapser" onclick="toggleSection('i:ResourceId')">Instances</p><div id="section.i:ResourceId" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResourceId:Eq:1" class="instance expander" onclick="toggleSection('i:id:ResourceId:Eq:1')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></span> <a href="#t:ResourceId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResourceId:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResourceId:Ord:2" class="instance expander" onclick="toggleSection('i:id:ResourceId:Ord:2')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Ord.html#t:Ord">Ord</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></span> <a href="#t:ResourceId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResourceId:Ord:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Ord.html#t:Ordering">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> <a href="#v:min" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResourceId:Read:3" class="instance expander" onclick="toggleSection('i:id:ResourceId:Read:3')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Read.html#t:Read">Read</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></span> <a href="#t:ResourceId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResourceId:Read:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:readsPrec">readsPrec</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-ParserCombinators-ReadP.html#t:ReadS">ReadS</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> <a href="#v:readsPrec" class="selflink">#</a></p><p class="src"><a href="#v:readList">readList</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-ParserCombinators-ReadP.html#t:ReadS">ReadS</a> [<a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a>] <a href="#v:readList" class="selflink">#</a></p><p class="src"><a href="#v:readPrec">readPrec</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-ParserCombinators-ReadPrec.html#t:ReadPrec">ReadPrec</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> <a href="#v:readPrec" class="selflink">#</a></p><p class="src"><a href="#v:readListPrec">readListPrec</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-ParserCombinators-ReadPrec.html#t:ReadPrec">ReadPrec</a> [<a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a>] <a href="#v:readListPrec" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResourceId:Show:4" class="instance expander" onclick="toggleSection('i:id:ResourceId:Show:4')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:Show">Show</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></span> <a href="#t:ResourceId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResourceId:Show:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a>] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResourceId:ToJSON:5" class="instance expander" onclick="toggleSection('i:id:ResourceId:ToJSON:5')"></span> <a href="file:///nix/store/fqkv52hj2fkryi7xrq1rwfy8fa45smly-aeson-0.11.2.0/share/doc/x86_64-linux-ghc-8.0.1/aeson-0.11.2.0/html/Data-Aeson-Types.html#t:ToJSON">ToJSON</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></span> <a href="#t:ResourceId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResourceId:ToJSON:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toJSON">toJSON</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/fqkv52hj2fkryi7xrq1rwfy8fa45smly-aeson-0.11.2.0/share/doc/x86_64-linux-ghc-8.0.1/aeson-0.11.2.0/html/Data-Aeson-Types.html#t:Value">Value</a> <a href="#v:toJSON" class="selflink">#</a></p><p class="src"><a href="#v:toEncoding">toEncoding</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/fqkv52hj2fkryi7xrq1rwfy8fa45smly-aeson-0.11.2.0/share/doc/x86_64-linux-ghc-8.0.1/aeson-0.11.2.0/html/Data-Aeson-Types.html#t:Encoding">Encoding</a> <a href="#v:toEncoding" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResourceId:Hashable:6" class="instance expander" onclick="toggleSection('i:id:ResourceId:Hashable:6')"></span> <a href="file:///nix/store/63dl7yp4gw1b5gmsnpnnxcicml82qgqz-hashable-1.2.4.0/share/doc/x86_64-linux-ghc-8.0.1/hashable-1.2.4.0/html/Data-Hashable.html#t:Hashable">Hashable</a> <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></span> <a href="#t:ResourceId" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResourceId:Hashable:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:hashWithSalt">hashWithSalt</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> <a href="#v:hashWithSalt" class="selflink">#</a></p><p class="src"><a href="#v:hash">hash</a> :: <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> <a href="#v:hash" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:mkResourceId" class="def">mkResourceId</a> :: <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a> -&gt; <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a> -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> <a href="#v:mkResourceId" class="selflink">#</a></p><div class="doc"><p><code><a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></code> constructor helper</p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:HasResourceId" class="def">HasResourceId</a> a <span class="keyword">where</span> <a href="#t:HasResourceId" class="selflink">#</a></p><div class="doc"><p>Object can be uniquely identified in api</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="JsonApi-Relationships.html#v:resourceId">resourceId</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:resourceId" class="def">resourceId</a> :: a -&gt; <a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a> <a href="#v:resourceId" class="selflink">#</a></p></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="JsonApi-Relationships.html#t:HasResourceId">HasResourceId</a> a =&gt; <a id="t:IsResource" class="def">IsResource</a> a <span class="keyword">where</span> <a href="#t:IsResource" class="selflink">#</a></p><div class="doc"><p>Implementing object is a JSON API resource</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:resourceAttributes" class="def">resourceAttributes</a> :: a -&gt; [(<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="file:///nix/store/fqkv52hj2fkryi7xrq1rwfy8fa45smly-aeson-0.11.2.0/share/doc/x86_64-linux-ghc-8.0.1/aeson-0.11.2.0/html/Data-Aeson-Types.html#t:Value">Value</a>)] <a href="#v:resourceAttributes" class="selflink">#</a></p><p class="src"><a id="v:resourceLinks" class="def">resourceLinks</a> :: a -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="JsonApi-Internal-Document.html#t:Links">Links</a> <a href="#v:resourceLinks" class="selflink">#</a></p><p class="src"><a id="v:resourceMeta" class="def">resourceMeta</a> :: a -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="JsonApi-Internal-Document.html#t:Meta">Meta</a> <a href="#v:resourceMeta" class="selflink">#</a></p></div></div><h2 id="g:2">Helper functions for defining <code><a href="JsonApi-Relationships.html#t:IsResource">IsResource</a></code> instances</h2><div class="top"><p class="src"><a id="v:links" class="def">links</a> :: [(<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>)] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="JsonApi-Internal-Document.html#t:Links">Links</a> <a href="#v:links" class="selflink">#</a></p><div class="doc"><p>Helper for defining <code><a href="JsonApi-Relationships.html#v:resourceLinks">resourceLinks</a></code> method</p><pre>instance IsResource Book where
  resourceLinks book = links [(&quot;self&quot;, bookUrl (bookId book))]

</pre></div></div><div class="top"><p class="src"><a id="v:meta" class="def">meta</a> :: [(<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="file:///nix/store/fqkv52hj2fkryi7xrq1rwfy8fa45smly-aeson-0.11.2.0/share/doc/x86_64-linux-ghc-8.0.1/aeson-0.11.2.0/html/Data-Aeson-Types.html#t:Value">Value</a>)] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="JsonApi-Internal-Document.html#t:Meta">Meta</a> <a href="#v:meta" class="selflink">#</a></p><div class="doc"><p>Helper for defining <code><a href="JsonApi-Relationships.html#v:resourceMeta">resourceMeta</a></code> method</p><pre>instance IsResource BookSearch where
  resourceMeta bs = meta [&quot;count&quot; .= length (foundBooks bs)]

</pre></div></div><h1 id="g:3">Describing relationships</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Resource" class="def">Resource</a> a relationships <a href="#t:Resource" class="selflink">#</a></p><div class="doc"><p>A resource description, first argument is a resource type,
 second argument is a list of relationships.</p><pre>type AuthorResource = Resource Author '[]
type ReviewResource = Resource Review '[]

type BookResource = Resource Book '[ Rel &quot;reviews&quot; ReviewResource ]
                                   , RelInclude &quot;author&quot; AuthorResource ]
</pre></div><div class="subs instances"><p id="control.i:Resource" class="caption collapser" onclick="toggleSection('i:Resource')">Instances</p><div id="section.i:Resource" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Resource:FetchRelationship:1" class="instance expander" onclick="toggleSection('i:id:Resource:FetchRelationship:1')"></span> (<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> nm, <a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a> m r nm a, <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)) =&gt; <a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m r (<a href="JsonApi-Relationships.html#t:RelInclude">RelInclude</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships))</span> <a href="#t:FetchRelationship" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Resource:FetchRelationship:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fetchRelationship">fetchRelationship</a> :: proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:RelInclude">RelInclude</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) -&gt; r ((<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a>), <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:fetchRelationship" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Resource:FetchRelationship:2" class="instance expander" onclick="toggleSection('i:id:Resource:FetchRelationship:2')"></span> (<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> nm, <a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a> m r nm a, <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)) =&gt; <a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m r (<a href="JsonApi-Relationships.html#t:Rel">Rel</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships))</span> <a href="#t:FetchRelationship" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Resource:FetchRelationship:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fetchRelationship">fetchRelationship</a> :: proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:Rel">Rel</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) -&gt; r ((<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a>), <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:fetchRelationship" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Resource:SerialiseResource:3" class="instance expander" onclick="toggleSection('i:id:Resource:SerialiseResource:3')"></span> (<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="JsonApi-Relationships.html#t:IsResource">IsResource</a> a, <a href="JsonApi-Internal-Relationships.html#t:FetchAllRelationships">FetchAllRelationships</a> [<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a>] m a relationships) =&gt; <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)</span> <a href="#t:SerialiseResource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Resource:SerialiseResource:3" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a>) (a :: m) :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> <a href="#t:SerialiseI" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:serialise">serialise</a> :: proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) a -&gt; <a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships (<a href="JsonApi-Internal-Document.html#t:ResourceObject">ResourceObject</a>, <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:serialise" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Resource:SerialiseI:4" class="instance expander" onclick="toggleSection('i:id:Resource:SerialiseI:4')"></span> <span class="keyword">type</span> <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)</span> <a href="#t:SerialiseI" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Resource:SerialiseI:4" class="inst-details hide"><div class="src"><span class="keyword">type</span> <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) = a</div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Rel" class="def">Rel</a> name a <a href="#t:Rel" class="selflink">#</a></p><div class="doc"><p>Describes a relationship <code>name</code> to another <code><a href="JsonApi-Relationships.html#t:Resource">Resource</a></code></p></div><div class="subs instances"><p id="control.i:Rel" class="caption collapser" onclick="toggleSection('i:Rel')">Instances</p><div id="section.i:Rel" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Rel:FetchRelationship:1" class="instance expander" onclick="toggleSection('i:id:Rel:FetchRelationship:1')"></span> (<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> nm, <a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a> m r nm a, <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)) =&gt; <a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m r (<a href="JsonApi-Relationships.html#t:Rel">Rel</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships))</span> <a href="#t:FetchRelationship" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Rel:FetchRelationship:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fetchRelationship">fetchRelationship</a> :: proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:Rel">Rel</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) -&gt; r ((<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a>), <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:fetchRelationship" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RelInclude" class="def">RelInclude</a> name a <a href="#t:RelInclude" class="selflink">#</a></p><div class="doc"><p>Same as <code><a href="JsonApi-Relationships.html#t:Rel">Rel</a></code>, but related resource is included in response by default,
 unless <code>include</code> parameter is passed to server</p></div><div class="subs instances"><p id="control.i:RelInclude" class="caption collapser" onclick="toggleSection('i:RelInclude')">Instances</p><div id="section.i:RelInclude" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RelInclude:FetchRelationship:1" class="instance expander" onclick="toggleSection('i:id:RelInclude:FetchRelationship:1')"></span> (<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/GHC-TypeLits.html#t:KnownSymbol">KnownSymbol</a> nm, <a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a> m r nm a, <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)) =&gt; <a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m r (<a href="JsonApi-Relationships.html#t:RelInclude">RelInclude</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships))</span> <a href="#t:FetchRelationship" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RelInclude:FetchRelationship:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fetchRelationship">fetchRelationship</a> :: proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:RelInclude">RelInclude</a> nm (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) -&gt; r ((<a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>, <a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a>), <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:fetchRelationship" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:4">Fetching related resources</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:FetchMode" class="def">FetchMode</a> <a href="#t:FetchMode" class="selflink">#</a></p><div class="doc"><p>Describes if related resources should be fetcher, or we are interested
 in relationship itself only</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:FetchIncluded" class="def">FetchIncluded</a></td><td class="doc"><p>Fetch relationship with related resource</p></td></tr><tr><td class="src"><a id="v:FetchRelationship" class="def">FetchRelationship</a></td><td class="doc"><p>Fetch only relationship itself</p></td></tr></table></div><div class="subs instances"><p id="control.i:FetchMode" class="caption collapser" onclick="toggleSection('i:FetchMode')">Instances</p><div id="section.i:FetchMode" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:FetchMode:Eq:1" class="instance expander" onclick="toggleSection('i:id:FetchMode:Eq:1')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a></span> <a href="#t:FetchMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:FetchMode:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:FetchMode:Ord:2" class="instance expander" onclick="toggleSection('i:id:FetchMode:Ord:2')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Ord.html#t:Ord">Ord</a> <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a></span> <a href="#t:FetchMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:FetchMode:Ord:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:compare">compare</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Ord.html#t:Ordering">Ordering</a> <a href="#v:compare" class="selflink">#</a></p><p class="src"><a href="#v:-60-">(&lt;)</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-60-" class="selflink">#</a></p><p class="src"><a href="#v:-60--61-">(&lt;=)</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-60--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62-">(&gt;)</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-62-" class="selflink">#</a></p><p class="src"><a href="#v:-62--61-">(&gt;=)</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-62--61-" class="selflink">#</a></p><p class="src"><a href="#v:max">max</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> <a href="#v:max" class="selflink">#</a></p><p class="src"><a href="#v:min">min</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> <a href="#v:min" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:FetchMode:Show:3" class="instance expander" onclick="toggleSection('i:id:FetchMode:Show:3')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:Show">Show</a> <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a></span> <a href="#t:FetchMode" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:FetchMode:Show:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a>] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a id="t:FetchRelated" class="def">FetchRelated</a> m r nm a <span class="keyword">where</span> <a href="#t:FetchRelated" class="selflink">#</a></p><div class="doc"><p>Class for fetching data for relationship <code>name</code>, from entity <code>r</code>
 to entity <code>a</code>.</p><p>In <code><a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a></code> mode, if you don't have any <code><a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></code>s for
 related resources inferable just from source resource, you should
 return <code><a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code> in <code>relationshipData</code> field.</p><p>In <code><a href="JsonApi-Relationships.html#v:FetchIncluded">FetchIncluded</a></code> mode, if you have returned any <code><a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></code>s in
 <code>relationshipData</code> field, you must also return all resources whith same
 <code><a href="JsonApi-Relationships.html#t:ResourceId">ResourceId</a></code> in second field of result pair.</p><pre>instance Monad m =&gt; <code><a href="JsonApi-Relationships.html#t:FetchRelated">FetchRelated</a></code> Book &quot;author&quot; Author where
  fetchRelated _ mode book = case mode of
      <code><a href="JsonApi-Internal-Relationships.html#t:FetchRelationship">FetchRelationship</a></code> -&gt; pure (bookToAuthor, [])
      <code><a href="JsonApi-Relationships.html#v:FetchIncluded">FetchIncluded</a></code> -&gt; do
        author &lt;- fetchAuthor (bookAuthorId book)
        pure (bookToAuthor, [author])
     where
       bookToAuthor = <code><a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a></code>
         (links [(&quot;related&quot;, authorUrl (bookAuthorid book))]
         (Just $ <code><a href="JsonApi-Internal-Document.html#v:SingletonData">SingletonData</a></code> (bookAuthorId book))
         <code><a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code>
</pre></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="JsonApi-Relationships.html#v:fetchRelated">fetchRelated</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:fetchRelated" class="def">fetchRelated</a> :: <span class="keyword">forall</span> proxy. proxy (<a href="JsonApi-Relationships.html#t:Rel">Rel</a> nm a) -&gt; <a href="JsonApi-Relationships.html#t:FetchMode">FetchMode</a> -&gt; r -&gt; m (<a href="JsonApi-Internal-Document.html#t:Relationship">Relationship</a>, [a]) <a href="#v:fetchRelated" class="selflink">#</a></p></div></div><h1 id="g:5">Fetching related resource from description</h1><div class="top"><p class="src"><span class="keyword">class</span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a id="t:SerialiseResource" class="def">SerialiseResource</a> m a <span class="keyword">where</span> <a href="#t:SerialiseResource" class="selflink">#</a></p><div class="doc"><p>Fetches all related resources of some <code><a href="JsonApi-Relationships.html#t:Resource">Resource</a></code></p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="JsonApi-Relationships.html#v:serialise">serialise</a></p></div><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a id="t:SerialiseI" class="def">SerialiseI</a> m a <a href="#t:SerialiseI" class="selflink">#</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:serialise" class="def">serialise</a> :: <span class="keyword">forall</span> proxy. proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m a -&gt; m (<a href="JsonApi-Internal-Document.html#t:ResourceObject">ResourceObject</a>, <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:serialise" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:SerialiseResource" class="caption collapser" onclick="toggleSection('i:SerialiseResource')">Instances</p><div id="section.i:SerialiseResource" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:SerialiseResource:SerialiseResource:1" class="instance expander" onclick="toggleSection('i:ic:SerialiseResource:SerialiseResource:1')"></span> (<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Control-Monad.html#t:Monad">Monad</a> m, <a href="JsonApi-Relationships.html#t:IsResource">IsResource</a> a, <a href="JsonApi-Internal-Relationships.html#t:FetchAllRelationships">FetchAllRelationships</a> [<a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a>] m a relationships) =&gt; <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships)</span> <a href="#t:SerialiseResource" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:SerialiseResource:SerialiseResource:1" class="inst-details hide"><div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a>) (a :: m) :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Kind.html#t:-42-">*</a> <a href="#t:SerialiseI" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:serialise">serialise</a> :: proxy a -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m (<a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships) a -&gt; <a href="JsonApi-Relationships.html#t:Resource">Resource</a> a relationships (<a href="JsonApi-Internal-Document.html#t:ResourceObject">ResourceObject</a>, <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Monoid.html#t:Endo">Endo</a> <a href="JsonApi-Internal-Relationships.html#t:Included">Included</a>) <a href="#v:serialise" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Include" class="def">Include</a> <a href="#t:Include" class="selflink">#</a></p><div class="doc"><p>Describes what to do with related resources</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:IncludeDefault" class="def">IncludeDefault</a></td><td class="doc"><p>Only include those which are included by
 default, like specified with <code><a href="JsonApi-Relationships.html#t:RelInclude">RelInclude</a></code></p></td></tr><tr><td class="src"><a id="v:Include" class="def">Include</a></td><td class="doc"><p>Include this, but not kids</p></td></tr><tr><td class="src"><a id="v:IncludeNot" class="def">IncludeNot</a></td><td class="doc"><p>Do not include this</p></td></tr><tr><td class="src"><a id="v:IncludeChildren" class="def">IncludeChildren</a> (<a href="file:///nix/store/wmgvv9jynyfk4cwsadd1yzc0sdipbin7-unordered-containers-0.2.7.1/share/doc/x86_64-linux-ghc-8.0.1/unordered-containers-0.2.7.1/html/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a> <a href="JsonApi-Relationships.html#t:Include">Include</a>)</td><td class="doc"><p>Include this and specified kids</p></td></tr></table></div><div class="subs instances"><p id="control.i:Include" class="caption collapser" onclick="toggleSection('i:Include')">Instances</p><div id="section.i:Include" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Include:Eq:1" class="instance expander" onclick="toggleSection('i:id:Include:Eq:1')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="JsonApi-Relationships.html#t:Include">Include</a></span> <a href="#t:Include" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Include:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Include:Show:2" class="instance expander" onclick="toggleSection('i:id:Include:Show:2')"></span> <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:Show">Show</a> <a href="JsonApi-Relationships.html#t:Include">Include</a></span> <a href="#t:Include" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Include:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="JsonApi-Relationships.html#t:Include">Include</a>] -&gt; <a href="file:///nix/store/l66r360zz9j7hamsm4xh15635x2fn64r-ghc-8.0.1-doc/share/doc/ghc/html/libraries/base-4.9.0.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:6">Serialising documents</h1><div class="top"><p class="src"><a id="v:serialiseDocument" class="def">serialiseDocument</a> :: <a href="JsonApi-Relationships.html#t:SerialiseResource">SerialiseResource</a> m a =&gt; proxy a -&gt; <a href="JsonApi-Internal-Document.html#t:ResourceData">ResourceData</a> (<a href="JsonApi-Relationships.html#t:SerialiseI">SerialiseI</a> m a) -&gt; <a href="JsonApi-Relationships.html#t:Include">Include</a> -&gt; <a href="JsonApi-Relationships.html#t:FieldsFilter">FieldsFilter</a> -&gt; m <a href="JsonApi-Internal-Document.html#t:Document">Document</a> <a href="#v:serialiseDocument" class="selflink">#</a></p><div class="doc"><p>serialise resource <code>a</code> associated with type <code>'SerialiseI m a'</code>
 into a document. You can add links and meta to that document later</p><pre>type BookResource = Resource Book '[Rel &quot;author&quot; (Resource Author '[])]

getBookResource :: BookId -&gt; Document
getBookResource bookId = withTransaction $ do
  book &lt;- getBook bookId
  <code><a href="JsonApi-Relationships.html#v:serialiseDocument">serialiseDocument</a></code> (Proxy :: Proxy BookResource)
                     (<code><a href="JsonApi-Internal-Document.html#v:SingletonData">SingletonData</a></code> book)
                     <code><a href="JsonApi-Relationships.html#v:IncludeDefault">IncludeDefault</a></code>
                     mempty

</pre></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:FieldsFilter" class="def">FieldsFilter</a> = <a href="file:///nix/store/wmgvv9jynyfk4cwsadd1yzc0sdipbin7-unordered-containers-0.2.7.1/share/doc/x86_64-linux-ghc-8.0.1/unordered-containers-0.2.7.1/html/Data-HashMap-Strict.html#t:HashMap">HashMap</a> <a href="JsonApi-Internal-Document.html#t:ResourceType">ResourceType</a> (<a href="file:///nix/store/wmgvv9jynyfk4cwsadd1yzc0sdipbin7-unordered-containers-0.2.7.1/share/doc/x86_64-linux-ghc-8.0.1/unordered-containers-0.2.7.1/html/Data-HashSet.html#t:HashSet">HashSet</a> <a href="file:///nix/store/4achfmshdsa9ny5l9fcas4v75bc76akn-text-1.2.2.1/share/doc/x86_64-linux-ghc-8.0.1/text-1.2.2.1/html/Data-Text.html#t:Text">Text</a>) <a href="#t:FieldsFilter" class="selflink">#</a></p><div class="doc"><p>Which fields to include in output by <code><a href="JsonApi-Internal-Document.html#t:ResourceType">ResourceType</a></code>
 used for sparse fieldsets functionality.</p><p><a href="http://jsonapi.org/format/#fetching-sparse-fieldsets">JSON API Spec</a></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.2</p></div></body></html>